FROM malirod/cpp-dev-base

ENV HOME /root
ENV PROJECT_ROOT $HOME/project

ADD . $PROJECT_ROOT

WORKDIR $PROJECT_ROOT


RUN if [ -d "build-clang-debug" ]; then rm -Rf build-clang-debug; fi
RUN mkdir build-clang-debug
RUN cd build-clang-debug && conan install .. --profile ../tools/conan/profile-clang --build missing && cd ..

RUN if [ -d "build-clang-release" ]; then rm -Rf build-clang-release; fi
RUN mkdir build-clang-release

RUN if [ -d "build-gcc-debug" ]; then rm -Rf build-gcc-debug; fi
RUN mkdir build-gcc-debug
RUN cd build-gcc-debug && conan install .. --profile ../tools/conan/profile-gcc --build missing && cd ..

RUN if [ -d "build-gcc-release" ]; then rm -Rf build-gcc-release; fi
RUN mkdir build-gcc-release
